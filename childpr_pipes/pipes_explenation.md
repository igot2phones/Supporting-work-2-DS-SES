### Τεκμηρίωση Κώδικα για 

3complexchildexample.c



#### Περιγραφή
Το πρόγραμμα 

3complexchildexample.c

 δημιουργεί τρία παιδικά διεργασίες χρησιμοποιώντας τη συνάρτηση `fork()`. Κάθε παιδί στέλνει ένα μήνυμα στον γονέα μέσω ενός σωλήνα (pipe). Ο γονέας διαβάζει και εκτυπώνει τα μηνύματα από τα παιδιά.

#### Δομή του Κώδικα

1. **Δημιουργία Σωλήνα**
    ```c
    int pipefd[2];
    if (pipe(pipefd) == -1) {
        perror("pipe");
        return 1;
    }
    ```
    - **`pipefd[0]`**: Αναγνωστικό άκρο του σωλήνα.
    - **`pipefd[1]`**: Εγγραφικό άκρο του σωλήνα.
    - Ο σωλήνας δημιουργείται για επικοινωνία μεταξύ γονέα και παιδιών.

2. **Δημιουργία Παιδικών Διεργασιών**
    ```c
    for (int i = 0; i < 3; i++) {
        pid_t pid = fork();

        if (pid < 0) {
            perror("fork");
            return 1;
        } else if (pid == 0) {
            // Κώδικας παιδιού
        }
    }
    ```
    - Η λούπα `for` δημιουργεί τρεις παιδικές διεργασίες.
    - Κάθε παιδί εκτελεί τον κώδικα μέσα στο μπλοκ `if (pid == 0)`.

3. **Συμπεριφορά Παιδιού**
    ```c
    if (pid == 0) {
        close(pipefd[0]); // Κλείσιμο του αναγνωστικού άκρου
        char message[50];
        snprintf(message, sizeof(message), "This is from child %d (PID: %d)\n", i + 1, getpid());
        write(pipefd[1], message, strlen(message));
        close(pipefd[1]);
        return 0;
    }
    ```
    - **Κλείσιμο `pipefd[0]`**: Τα παιδιά δεν διαβάζουν από το σωλήνα, οπότε κλείνουν το αναγνωστικό άκρο.
    - **Δημιουργία Μηνύματος**: Κάθε παιδί δημιουργεί ένα μήνυμα με τον αριθμό του και το PID της διεργασίας του.
    - **Γράψιμο στο Σωλήνα**: Το μήνυμα γράφεται στο εγγραφικό άκρο του σωλήνα.
    - **Κλείσιμο `pipefd[1]`**: Μετά το γράψιμο, το εγγραφικό άκρο κλείνεται.

4. **Συμπεριφορά Γονέα**
    ```c
    close(pipefd[1]); // Κλείσιμο του εγγραφικού άκρου στον γονέα
    char buffer[100];
    while (read(pipefd[0], buffer, sizeof(buffer)) > 0) {
        printf("%s", buffer);
    }
    close(pipefd[0]);

    for (int i = 0; i < 3; i++) {
        wait(NULL);
    }
    printf("Parent process (PID: %d)\n", getpid());
    ```
    - **Κλείσιμο `pipefd[1]`**: Ο γονέας δεν θα γράψει πια στον σωλήνα, οπότε κλείνει το εγγραφικό άκρο.
    - **Ανάγνωση από το Σωλήνα**: Ο γονέας διαβάζει τα μηνύματα από το αναγνωστικό άκρο και τα εκτυπώνει.
    - **Κλείσιμο `pipefd[0]`**: Μετά την ανάγνωση όλων των μηνυμάτων, το αναγνωστικό άκρο κλείνεται.
    - **Αναμονή για Παιδιά**: Ο γονέας περιμένει να τερματίσουν όλες οι παιδικές διεργασίες.
    - **Εκτύπωση PID Γονέα**: Τέλος, εκτυπώνει το PID της γονικής διεργασίας.

#### Δομή και Χρήση των Σωλήνων (Pipes)

- **Δημιουργία Σωλήνα**
  - Η συνάρτηση `pipe(pipefd)` δημιουργεί έναν σωλήνα με δύο άκρα:
    - `pipefd[0]`: Αναγνωστικό άκρο (`read end`).
    - `pipefd[1]`: Εγγραφικό άκρο (`write end`).

- **Κλείσιμο Άκρων**
  - **Παιδιά**:
    - Κλείνουν το αναγνωστικό άκρο (`pipefd[0]`) γιατί δεν διαβάζουν από το σωλήνα.
    - Μετά το γράψιμο, κλείνουν το εγγραφικό άκρο (`pipefd[1]`).
  - **Γονέας**:
    - Κλείνει το εγγραφικό άκρο (`pipefd[1]`) γιατί δεν γράφει στον σωλήνα.
    - Διαβάζει από το αναγνωστικό άκρο (`pipefd[0]`) και μετά το κλείνει.

- **Επικοινωνία μέσω Σωλήνα**
  - Τα παιδιά γράφουν μηνύματα στο σωλήνα χρησιμοποιώντας το `write(pipefd[1], message, strlen(message))`.
  - Ο γονέας διαβάζει τα μηνύματα από το σωλήνα με το `read(pipefd[0], buffer, sizeof(buffer))` και τα εκτυπώνει.

#### Κύριες Εντολές και Συναρτήσεις

- **`pipe(pipefd)`**: Δημιουργεί έναν σωλήνα για επικοινωνία μεταξύ διεργασιών.
- **`fork()`**: Δημιουργεί μια νέα παιδική διεργασία.
- **`close(fd)`**: Κλείνει έναν file descriptor.
- **`snprintf()`**: Δημιουργεί ένα μορφοποιημένο string.
- **`write(pipefd[1], message, strlen(message))`**: Γράφει δεδομένα στο εγγραφικό άκρο του σωλήνα.
- **`read(pipefd[0], buffer, sizeof(buffer))`**: Διαβάζει δεδομένα από το αναγνωστικό άκρο του σωλήνα.
- **`wait(NULL)`**: Περιμένει την τερματισμό μιας παιδικής διεργασίας.

Αυτή η δομή επιτρέπει την αποτελεσματική επικοινωνία μεταξύ του γονέα και των παιδιών μέσω των σωλήνων, εξασφαλίζοντας σωστή διαχείριση πόρων και αποφυγή προβλημάτων όπως τα αδιέξοδα (`deadlocks`).